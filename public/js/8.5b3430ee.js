(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{3764:function(a,e,t){"use strict";t.r(e);var s=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("TableUsers",{attrs:{title:"Usuarios"}})},i=[],n=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"show",rawName:"v-show",value:!this.isLoaded,expression:"!this.isLoaded"}],staticClass:"q-pa-md"},[t("q-table",{attrs:{dense:a.$q.screen.lt.sm,title:this.title,data:a.data,columns:a.columns,"row-key":"id",pagination:a.pagination,"rows-per-page-options":a.rows_per_page_options,loading:a.loadingTable},on:{"update:pagination":function(e){a.pagination=e}},scopedSlots:a._u([{key:"top-right",fn:function(){return[t("q-input",{attrs:{borderless:"",dense:"",debounce:"600",to:{path:"/users/search?text_search="+a.filter},placeholder:"Busca"},scopedSlots:a._u([{key:"append",fn:function(){return[t("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:a.filter,callback:function(e){a.filter=e},expression:"filter"}})]},proxy:!0},{key:"header",fn:function(e){return[t("q-tr",{attrs:{props:e}},a._l(e.cols,(function(s){return t("q-th",{directives:[{name:"show",rawName:"v-show",value:""!=s.label,expression:"col.label != ''"}],key:s.name,attrs:{props:e}},[a._v("\n          "+a._s(s.label)+"\n        ")])})),1)]}},{key:"body",fn:function(e){return[t("q-tr",{staticStyle:{cursor:"pointer"},attrs:{props:e},on:{click:function(a){e.expand=!e.expand}}},a._l(e.cols,(function(s){return t("q-td",{directives:[{name:"show",rawName:"v-show",value:"0"!=s.name.substring(1,0),expression:"col.name.substring(1,0) != '0'"}],key:s.name,attrs:{props:e}},["Status"===s.name?t("i",{staticClass:"fas fa-circle",staticStyle:{"margin-left":"10%"},style:{color:1==s.value?"green":"gray"}}):"Permissões"==s.name?t("q-btn",{staticStyle:{"margin-left":"5%"},attrs:{to:{path:"/users/permission/"+e.key},size:"sm",color:"accent",round:"",dense:""}},[t("i",{staticClass:"fas fa-pen"})]):t("span",[a._v(a._s(s.value))])],1)})),1),a._l(e.cols,(function(s){return t("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],key:s.name,attrs:{props:e}},[t("q-td",{directives:[{name:"show",rawName:"v-show",value:""==s.label&&""!=s.field,expression:"col.label == '' && col.field != ''"}],staticClass:"bg-grey-2",attrs:{colspan:"100%"}},[t("div",{staticClass:"text-left"},[a._v("\n            "+a._s(s.field)+": "+a._s(s.value)+"\n          ")])])],1)})),t("q-td",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],staticClass:"bg-grey-2",attrs:{colspan:"100%"}},[t("div",{staticClass:"text-left"},[t("q-btn",{staticClass:"full-width",attrs:{"text-color":"black",color:"standard",to:{path:"/users/edit/"+e.key},label:"Editar usuário"}})],1)])]}},{key:"bottom",fn:function(){return[t("div",{staticClass:" row items-center justify-end",staticStyle:{"margin-left":"55%"}},[t("div",{staticClass:"q-table__separator col"}),t("div",{staticClass:"q-table__control"},[t("span",{staticClass:"q-table__bottom-item"},[a._v("paginas:")]),t("q-select",{attrs:{disable:a.loadingTable?"disable":"enable",dense:"",options:a.rows_per_page_options},model:{value:a.rowsPerPage,callback:function(e){a.rowsPerPage=e},expression:"rowsPerPage"}})],1),t("div",{staticClass:"q-table__control"},[t("span",{staticClass:"q-table__bottom-item"},[a._v(a._s(a.pagination.page)+"-"+a._s(a.pagination.lastPage)+" de "+a._s(a.pagination.rowsNumber))]),t("q-btn",{attrs:{flat:"",color:"primary",disable:1==a.pagination.page||a.loadingTable?"disable":"enable",icon:"first_page"},on:{click:function(e){return a.firstPage()}}}),t("q-btn",{attrs:{flat:"",disable:1==a.pagination.page||a.loadingTable?"disable":"enable",color:"primary",icon:"chevron_left"},on:{click:function(e){return a.previousPage()}}}),t("q-btn",{attrs:{flat:"",disable:a.pagination.page==a.pagination.lastPage||a.loadingTable?"disable":"enable",color:"primary",icon:"chevron_right"},on:{click:function(e){return a.nextPage()}}}),t("q-btn",{attrs:{flat:"",disable:a.pagination.page==a.pagination.lastPage||a.loadingTable?"disable":"enable",color:"primary",icon:"last_page"},on:{click:function(e){return a.lastPage()}}})],1)])]},proxy:!0}])})],1)},o=[],l=t("758b"),r={name:"tablelist",props:["title"],data(){return{filter:"",total_num_rows:0,isLoaded:!0,rowsPerPage:7,loadingTable:!1,rows_per_page_options:[5,7,10,20,50,"Todos"],pagination:{page:1,rowsPerPage:7,rowsNumber:0,lastPage:0},columns:[{name:"0id",align:"left",label:"",field:""},{name:"Permissões",align:"left",label:"Permissões",field:"Permissões"},{name:"Status",align:"left",label:"status",field:"status",sortable:!1,required:!0},{name:"name",required:!0,label:"Nome",align:"center",field:a=>a.name,format:a=>`${a}`,sortable:!1},{name:"E-mail",align:"center",label:"E-mail",field:"email",sortable:!1},{name:"Departamento",align:"left",label:"Departamento",field:"departamento",sortable:!1,required:!0},{name:"0Administrador",align:"center",label:"",field:"Gerente",sortable:!1,required:!0},{name:"0Unidade",align:"center",label:"",field:"Unidade",sortable:!1,required:!0},{name:"0Sobrenome",align:"center",label:"",field:"Sobrenome",sortable:!1,required:!0},{name:"0Fone",align:"center",label:"",field:"Telefone",sortable:!1,required:!0},{name:"0Cargo",align:"center",label:"",field:"Cargo",sortable:!1,required:!0},{name:"0Ramal",align:"center",label:"",field:"Ramal",sortable:!1,required:!0},{name:"0Hora_Técnica",align:"center",label:"",field:"Hora Técnica",sortable:!0,required:!0}],data:[]}},watch:{filter:function(){l["a"].post(`/users?page=${this.pagination.page}&rows=${this.pagination.rowsPerPage}&search=${this.filter}`).then((a=>{this.data=[],this.formatTable(a.data.users),this.pagination.rowsNumber=a.data.total_num_rows,this.pagination.lastPage=0===this.pagination.rowsPerPage?1:Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage),this.loadStop()}))},rowsPerPage:function(){this.loadingTable=!0,this.pagination.rowsPerPage="Todos"===this.rowsPerPage?0:this.rowsPerPage,this.pagination.page=1,this.updatePage()}},methods:{nextPage(){console.log("nextPage"),this.loadingTable=!0,this.pagination.page++,this.updatePage()},previousPage(){console.log("previousPage"),this.loadingTable=!0,this.pagination.page--,this.updatePage()},firstPage(){console.log("firstPage"),this.loadingTable=!0,this.pagination.page=1,this.updatePage()},lastPage(){console.log("lastPage"),this.loadingTable=!0,this.pagination.page=this.pagination.lastPage,this.updatePage()},updatePage(){l["a"].post(`/users?page=${this.pagination.page}&rows=${this.pagination.rowsPerPage}`).then((a=>{this.data=[],this.formatTable(a.data.users),console.log(a.data.users),this.pagination.rowsNumber=a.data.total_num_rows,this.pagination.lastPage=0===this.pagination.rowsPerPage?1:Math.ceil(this.pagination.rowsNumber/this.pagination.rowsPerPage),this.loadStop()})).catch((a=>{console.log(a),this.loadStop()}))},formatTable(a){this.data=[],a.forEach((a=>{this.data.push({id:a.id,name:a.name,email:a.email,departamento:a.departament,administrador:a.admin,Unidade:a.unit,Sobrenome:a.lastname,Telefone:a.lastname,Cargo:a.role,Ramal:a.ramal,"Hora Técnica":a.technical_time,status:a.active})})),console.log(this.data),this.loadStop()},loadStop(){this.$q.loading.hide(),this.isLoaded=!1,this.loadingTable=!1}},beforeMount(){this.updatePage()}},d=r,c=t("2877"),p=t("eaac"),g=t("27f9"),u=t("0016"),b=t("bd08"),m=t("357e"),h=t("db86"),f=t("9c40"),w=t("ddd8"),P=t("eebe"),_=t.n(P),v=Object(c["a"])(d,n,o,!1,null,null,null),q=v.exports;_()(v,"components",{QTable:p["a"],QInput:g["a"],QIcon:u["a"],QTr:b["a"],QTh:m["a"],QTd:h["a"],QBtn:f["a"],QSelect:w["a"]});var T={name:"tableuser",data(){return{return:{}}},components:{TableUsers:q}},y=T,x=Object(c["a"])(y,s,i,!1,null,null,null);e["default"]=x.exports},"758b":function(a,e,t){"use strict";t.d(e,"a",(function(){return r}));var s=t("bc3a"),i=t.n(s),n=window.location.href,o=n.split("/"),l=o[0]+"//"+o[2];const r=i.a.create({baseURL:l,timeout:9e4,withCredentials:!0,headers:{"Content-Type":"application/json"}})}}]);