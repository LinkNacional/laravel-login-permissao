(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"052d":function(s,t,i){"use strict";i.r(t);var e=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("CardPermission",{attrs:{id:s.id}})},o=[],a=function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:!s.loading,expression:"!loading"}],staticClass:"q-pa-md"},[i("q-form",{staticClass:"q-gutter-md",on:{submit:s.onSubmit}},[i("div",{staticClass:"row col-12"},[i("q-checkbox",{attrs:{clickable:"",val:"Admin",label:"Admin",color:"red"},nativeOn:{click:function(t){return s.checkAll()}},model:{value:s.admin,callback:function(t){s.admin=t},expression:"admin"}})],1),i("div",{staticClass:"row"},s._l(s.data_teste,(function(t,e,o){return i("div",{key:e,staticClass:"q-pa-md",staticStyle:{"max-width":"350px"}},[i("q-list",{attrs:{bordered:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[i("q-checkbox",{attrs:{clickable:"",val:e,label:e,color:s.colors[o]},nativeOn:{click:function(t){return s.checkGroup(e)}},model:{value:s.groups,callback:function(t){s.groups=t},expression:"groups"}})],1),i("q-separator"),s._l(t,(function(t){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t,attrs:{clickable:""}},[i("q-checkbox",{attrs:{"keep-color":"",val:t,label:t,color:s.colors[o]},model:{value:s.permissions,callback:function(t){s.permissions=t},expression:"permissions"}})],1)}))],2)],1)})),0),i("div",[i("q-btn",{attrs:{label:"Salvar",type:"submit",color:"primary"}})],1)])],1)},r=[],n=i("758b"),l={name:"CardPermission",props:["id"],data(){return{data_teste:{},data:[],admin:!1,contador:0,colors:["teal","orange","red","cyan","blue"],groups:[],permissions:[],loading:!0}},methods:{getPermissionsFromUser(){this.$q.loading.show(),n["a"].post("/users/permissions/"+this.id).then((s=>{s.data.forEach((s=>{this.permissions.push(s.name),this.loadingStop()})).catch((s=>{console.log(s),this.loadingStop()}))}))},loadingStop(){this.$q.loading.hide(),this.loading=!1},onSubmit(){n["a"].post("/users/permissions/save",{permissions:this.permissions,groups:this.groups,admin:this.admin,id:this.id}).then((s=>{console.log(s)}))},checkGroup(s){this.groups.find((t=>t===s))?this.data_teste[s].forEach((s=>{this.permissions.push(s)})):this.data_teste[s].forEach((s=>{this.permissions=this.permissions.filter((t=>t!==s))}))},checkAll(){if(!this.admin)return this.permissions=[],"false";var s=this.data_teste;Object.entries(s).forEach((s=>{s.forEach(((s,t)=>{0!==t&&s.forEach((s=>{this.permissions.find((t=>t===s))||this.permissions.push(s)}))}))}))},getAllPermissions(){this.$q.loading.show(),n["a"].post("/permissions").then((s=>{this.data_teste=s.data,delete this.data_teste["all auths"],this.loadingStop()})).catch((s=>{console.log(s),this.loadingStop()}))},checkGroupReverse(){const s=this.permissions,t=this.data_teste;Object.entries(t).forEach((t=>{const i=t[1],e=t[0],o=i.every((t=>{const i=s.find((s=>s===t));return void 0!==i}));o?this.groups.find((s=>s===e))||this.groups.push(e):this.groups=this.groups.filter((s=>s!==e))}))}},beforeMount(){this.getAllPermissions(),this.getPermissionsFromUser()},watch:{permissions:function(){const s=this.permissions,t=this.data_teste;var i=0;Object.entries(t).forEach((t=>{const e=t[1],o=t[0],a=e.every((t=>{i++;const e=s.find((s=>s===t));return void 0!==e}));a?this.groups.find((s=>s===o))||this.groups.push(o):this.groups=this.groups.filter((s=>s!==o))})),i===s.length?this.admin=!0:this.admin=!1}}},c=l,p=i("2877"),d=i("0378"),h=i("8f8e"),u=i("1c1c"),m=i("66e5"),f=i("eb85"),g=i("9c40"),b=i("714f"),v=i("eebe"),k=i.n(v),w=Object(p["a"])(c,a,r,!1,null,null,null),q=w.exports;k()(w,"components",{QForm:d["a"],QCheckbox:h["a"],QList:u["a"],QItem:m["a"],QSeparator:f["a"],QBtn:g["a"]}),k()(w,"directives",{Ripple:b["a"]});var _={name:"permissions",props:["id"],data(){return{isLoaded:!1,return:{}}},components:{CardPermission:q}},x=_,C=Object(p["a"])(x,e,o,!1,null,null,null);t["default"]=C.exports},"758b":function(s,t,i){"use strict";i.d(t,"a",(function(){return l}));var e=i("bc3a"),o=i.n(e),a=window.location.href,r=a.split("/"),n=r[0]+"//"+r[2];const l=o.a.create({baseURL:n,timeout:9e4,withCredentials:!0,headers:{"Content-Type":"application/json"}})}}]);